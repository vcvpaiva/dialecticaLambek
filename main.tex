\documentclass{article}
\usepackage[utf8]{inputenc}

\title{Dialectica Models of the Lambek Calculus Revisited}
\author{Valeria de Paiva and Harley Eades III}
\date{April 2016}

\usepackage{amssymb,amsmath,amsthm}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{mathpartir}
\usepackage[barr]{xy}
\usepackage{mdframed}

\let\mto\to                     % Used for arrows
\let\to\relax                   % Used for implication
\newcommand{\to}{\rightarrow}
\newcommand{\id}{\mathsf{id}}
\newcommand{\V}{\text{V}^+}
\newcommand{\N}{\mathcal{N}}
\newcommand{\pow}[1]{\mathcal{P}(#1)}
\newcommand{\rto}{\leftharpoonup}
\newcommand{\lto}{\rightharpoonup}
\newcommand{\LB}{\text{L}_!}
\newcommand{\LE}{\text{L}_\kappa}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{example}[theorem]{Example}


%% Ott includes:
\input{L-inc}

\begin{document}

\maketitle

\section*{Introduction}

This note recalls a Dialectica model of the Lambek Calculus presented
by the first author in the Amsterdam Colloquium 1991. We approach the
Lambek Calculus from the perspective of Linear Logic. In that earlier
work we took for granted the syntax and only worried about the
exciting possibilities of new models of Linear Logic-like systems.

Twenty five years later we find that the work is still interesting and
that it might inform some of the most recent work on word vectors. But
the Amsterdam Colloquium proceedings were never published and not even
the author had a copy of the paper. So we have decided to revisit some
of the old work, this time using the new tools that have been
developed for type theory and proof systems in the time that
elapsed. Thus, we implemented the calculus in Agda and we use
\texttt{Ott} \cite{Sewell:2010} to check that we do not have silly
mistakes in our term systems. The goal is to see if our new
implementations can shed new light on some of the issues that remained
open on the applicability and fit of the systems to their intended
uses.

\subsection*{Historical Overview}
The Syntactic Calculus was first introduced by Jim Lambek in 1958
\cite{Lambek1958}, now known as the Lambek Calculus, is an
explanation of the mathematics of sentence structure.  After a long
period of ostracism, around 1980 the Lambek Calculus was taken up by
logicians interested in Computational Linguistics, especially the ones
in the area of Categorial Grammar.
% The calculus was considered ``like a logical system" but much too
% weak to be taken seriously as a logic. To quote from van
% Benthem \begin{quotation}One fundamental system of this kind is the
% so-called `Lambek Calculus' whose type-change rules show a close
% analogy with the inference rules of constructive propositional
% logic.  \end{quotation}

The work on Categorial Grammar was given a serious impulse by the
advent of Girard's Linear Logic at the end of the 1980s.  Girard
showed that there is a full embedding, preserving proofs, of
Intuitionistic Logic into Linear Logic with a modality ``!", which
meant that one could consider several systems of resource
logics. These refined resource logics were applied to several areas of
Computer Science. 

In Computational Linguistics, the Lambek calculus 
has seen a significant number of works written
about it,  apart from a number of monographs that deal with
logical and linguistic aspects of the generalized type-logical
approach.  For general background on the type-logical approach, there
are the monographs of Moortgat, Morril,
Carpenter and Steedman. For a shorter introduction, see
Moortgat's chapter on the Handbook of Logic in Language \cite{?} 
or the Stanford Encyclopedia Of Philosophy article on Type Logical Grammar.

Type Logical Grammar situates the type-logical approach within the
framework of Montague's Universal Grammar and presents detailed
linguistic analyses for a substantive fragment of syntactic and
semantic phenomena in the grammar of English.  Type Logical Semantics
offers a general introduction to natural language semantics studied
from a type-logical perspective.
% Moortgat's Categorial Type Logics,
% in the Handbook of Logic ad
% Language


% However, fashion turned against these systems with the rise of
% probabilistic and machine learning systems.

This meant that a series of systems, implemented or not, were devised
that used the Lambek Calculus or variants of Linear Logic. These
systems can be as expressive as Intuitionistic Logic and the claim is
that they are more precise i.e. they make finer distinctions.  From
the beginning it was clear that the Lambek Calculus is the
multiplicative fragment of non-commutative Intuitionistic Linear
Logic.  Hence several interesting questions, considered for Linear
Logic, could also be asked of the Lambek Calculus.  One of them, posed
by Morrill et al is whether we can extend the Lambek calculus with a
modality that does for the structural rule of \textit{(exchange)} what
the modality \textit{of course} `!' does for the rules of
\textit{(weakening)} and \textit{(contraction)}.  A very preliminary
proposal, which answers this question affirmatively, is set forward in
this paper. The `answer' was provided in semantical terms in the first
version of this work. Here we provide also the more syntactic
description, building on work of Galatos and others.

%amount of work in Type Logical The Proof Theory of the systems
%considered should be investigated in future work. Another warning is
%that the perspective of this note is basically from Category Theory
%as a branch of Mathematics, so words like categories and functors are
%always meant in their mathematical, rather than linguistical or
%philosophical sense.

We first recall Linear Logic and provide the transformations to show
that the Lambek Calculus \textsf{L} really is the multiplicative
fragment of non-commutative Intuitionistic Linear Logic.  Then we
describe the usual String Semantics for the Lambek Calculus \textsf{L}
and generalize it, using a categorical perspective in the second
section.  The third section recalls our Dialectica model for the
Lambek Calculus.  Finally, in the fourth section we discuss modalities
and some untidiness of the Curry-Howard correspondence for the
fragments of Linear Logic in question.

\section{The Lambek Calculus and Some Extensions}

The Lambek Calculus, formerly the Syntactic Calculus $\sf L$, due to
J.  Lambek \cite{Lambek1958}, was created to capture the logical
structure of sentences.  Lambek introduced what we think of as a
substructural logic with an operator denoting concatenation,
$[[A (x) B]]$, and two implications relating the order of phrases,
$[[A <- B]]$ and $[[A -> B]]$.  The first implication corresponds to a
phrase of type $[[A]]$ when followed by a phrase of type $[[B]]$, and
the second is a phrase of type $[[B]]$ when proceeded by a phrase of
type $[[A]]$.

The Lambek Calculus can be presented as a
non-commutative intuitionistic multiplicative linear logic.  The
syntax of formulas and contexts of the logic are as follows:

\[
\begin{array}{lll}
  \text{(formulas)} & [[A]],[[B]],[[C]] ::= [[I]] \mid [[A (x) B]] \mid [[A <- B]] \mid [[A -> B]]\\
  \text{(contexts)} & [[G]] ::= [[A]] \mid [[G1,G2]]\\
\end{array}
\]

We denote mapping the modalities over an arbitrary context by $[[!{ G
}]]$ and $[[E{ G }]]$.  The inference rules are defined in
Figure~\ref{fig:L}.

\begin{figure}
  \begin{mdframed}
    \begin{mathpar}
    \Ldruleax{} \and
    \Ldrulecut{} \and
    \Ldruleunit{} \and
    \LdruleTl{} \and
    \LdruleTr{} \and
    \LdruleIRl{} \and
    \LdruleILl{} \and
    \LdruleIRr{} \and
    \LdruleILr{}     
  \end{mathpar}
  \end{mdframed}
    
  \caption{The Lambek Calculus: L}
  \label{fig:L}
\end{figure}

Because the operator $[[A (x) B]]$ denotes the type of concatenations
the types $[[A (x) B]]$ and $[[B (x) A]]$ are not equivalent, and
hence, \textsf{L} is non-commutative which explains why implication
must be broken up into two operators $[[A <- B]]$ and $[[A -> B]]$.  In the following subsections we give two extensions of L: one with the well-known modality of-course of linear logic which adds weakening and contraction, and a second with a new modality adding exchange.

\subsection{Adding Weakening and Contraction to the Lambek Calculus}
\label{subsec:the_lambek_calculus_with_the_weakening_and_contraction_modality}

The linear modality, $[[! A]]$, read ``of-course $[[A]]$'' was first
proposed by Girard \cite{Girard:1987} as a means of encoding
non-linear logic in both classical and intuitionistic forms in linear
logic.  For example, non-linear implication $[[A -> B]]$ is usually
encoded into linear logic by $[[!A]] \multimap [[B]]$. Since we have
based L on non-commutative intuitionistic linear logic it is
straightforward to add the of-course modality to L.  The rules for the
of-course modality are defined by the following rules:
\[
\begin{array}{lll}
  \LdruleC{} & \LdruleW{}\\
  \\
  \LdruleBr{} & \LdruleBl{}
\end{array}
\]
The rules $\Ldrulename{C}$ and $\Ldrulename{W}$ add contraction and
weakening to L in a controlled way.  Then the other two rules allow
for linear formulas to be injected into the modality; and essentially
correspond to the rules for necessitation found in S4\cite{?}.  Thus,
under the of-course modality the logic becomes non-linear. We will see
in Section~\ref{sec:dialectica_lambek_spaces} that these rules define
a comonad.  We call the extension of L with the of-course modality
$\LB$.
% subsection the_lambek_calculus_with_the_weakening_and_contraction_modality (end)

\subsection{Adding Exchange to the Lambek Calculus}
\label{subsec:the_lambek_calculus_with_the_exchange_modality}
As we remarked above, one leading question of the Lambek Calculus is
can exchange be added in a similar way to weakening and contraction?
That is, can we add a new modality that adds the exchange rule to L in
a controlled way?  The answer to this question is positive, and the
rules for this new modality are as follows:
\[
\begin{array}{lll}
  \LdruleEr{} & \LdruleEl{}\\
  \\
  \LdruleEOne{} & \LdruleETwo{} 
\end{array}
\]
The first two rules are similar to of-course, but the last two add
exchange to formulas under the $\kappa$-modality.  We call L with the
exchange modality $\LE$.  Thus, unlike intuitionistic linear logic
where any two formulas can be exchanged $\LE$ restricts exchange to
only formulas under the exchange modality.  Just like of-course
the exchange modality is modeled categorically as a comonad; see
Section~\ref{sec:dialectica_lambek_spaces}.
% subsection the_lambek_calculus_with_the_exchange_modality (end)

\section{Algebraic Semantics}

In Lambek's original paper \cite{Lambek1958} introducing his calculus
L, albeit without modalities, he introduced an algebraic semantics
that is now called the String Semantics for L.  The semantics begins
with a non-empty set of expressions denoted $\V$, and then by modeling
formulas of L by subsets of $\V$ it proceeds by defining operations on
these subsets, which correspond to the logical connectives of L.  Each
operation is defined as follows (using our notation for the logical
connectives):
\[
\begin{array}{c}
  [[A (x) B]] = \{xy \in \V \mid x \in A \text{ and } y \in B\}\\ \relax
  [[A <- B]] = \{x \in \V \mid \text{for all } y \in B, xy \in A\}\\ \relax
  [[A -> B]] = \{y \in \V \mid \text{for all } x \in A, xy \in B\}\\ \relax
\end{array}
\]
Let $\N = \pow{\V}$ be the powerset of $\V$.  Then we can view each of
the above definitions as binary operations with type $\N \times \N \mto
\N$. In fact, $\N$ has a natural order induced by set containment, and
concatenation, $[[A (x) B]]$, gives $\N$ a non-commutative monoidal
structure, where the unit $[[I]] = \{\epsilon\}$ is the set containing
the empty sequence:
\[
\begin{array}{lll}
  \text{(associativity)} & [[A (x) (B (x) C)]] = [[(A (x) B) (x) C]]\\
  \text{(unit)} & [[A (x) I]] = [[A]] = [[I (x) A]]\\
  \text{(non-commutativity)} & [[A (x) B]] \neq [[B (x) A]]\text{, in general}
\end{array}
\]

There happens to be a more general structure underlying the previous
semantics.  We now make this structure explicit using the tools
developed by Hyland and de Paiva \cite{Hyland:1991}. The ordering on
$\N$ induces a poset $(\N, \subseteq)$, but even more so, $\N$ is also
a monoid $(\N, \otimes, I)$, but that is not all, these two structures
are compatible, that is, given $A \subseteq B$ the following hold:
\[
  \begin{array}{cll}
    [[A (x) C]] \subseteq [[B (x) C]]\text{, for all } C \in \N\\ \relax
    [[C (x) A]] \subseteq [[C (x) B]]\text{, for all } C \in \N\\
  \end{array}
\]
Abstracting this structure out yields what is call an ordered
non-commutative monoid.
\begin{definition}
  \label{def:ordered-non-comm-monoid}
  An \textbf{ordered non-commutative monoid}, $(M,\leq,\circ,e)$, is a
  poset $(M,\leq)$ with a given compatible monoidal structure $(M,
  \circ, e)$.  That is, a set $M$ equipped with a binary relation,
  $\leq : M \times M \mto \mathsf{2}$, satisfying:
  \begin{center}
    \begin{tabular}{cll}
    \text{(reflexivity)} & $a \leq a$ for all $a \in M$\\
    \text{(transitivity)} &  $a \leq b$ and $b \leq c$, implies that $a
    \leq c$ for all $a, b , c \in M$\\
    \text{(antisymmetry)} &  $a \leq b$ and $b \leq a$, implies that $a = b$
    \end{tabular}
  \end{center}
  together with a monoidal multiplication $\circ : M \times M \mto M$
  and a distinguished object $e \in M$ satisfying the following:
  \begin{center}
    \begin{tabular}{cll}
    \text{(associativity)} & $a \circ (b \circ c) = (a \circ b) \circ c$\\
    \text{(identity)} & $e \circ a = a = a \circ e$
    \end{tabular}
  \end{center}
  The structures are compatible in the sense that, if $a \leq b$, then
  the following hold:
  \begin{center}
    \begin{tabular}{lll}
      $a \circ c \leq b \circ c$ for any $c \in M$\\
      $c \circ a \leq c \circ b$ for any $c \in M$\\
    \end{tabular}
  \end{center}
\end{definition}
It is easy to see that the previous definition accounts for all of the
structure we have described so far, and thus, we may conclude that
$(\N, \subseteq, \otimes, I)$ is an ordered non-commutative monoid,
however, this definition is not able to model the implication
operations $[[A <- B]]$ and $[[A -> B]]$.  To do this we need to
understand how implication relates to the ordered non-commutative
monoid structure.  Notice that the following hold:
\[
\begin{array}{lll}
  [[A (x) (A -> B)]] \subseteq B\\ \relax
  [[(A <- B) (x) A]] \subseteq B\\ \relax
\end{array}
\]
Furthermore, there are no larger objects of $\N$ with these
properties.  Abstracting this results in the notion of a biclosed
poset.
\begin{definition}
  \label{def:biclosed-poset}
  Suppose $(M, \leq, \circ, e)$ is an ordered non-commutative monoid.
  If there exists a largest $x \in M$ such that $a \circ x \leq b$ for
  any $a, b \in M$, then we denote $x$ by $a \lto b$ and called it
  the \textbf{left-pseudocomplement} of $a$ w.r.t $b$.  Additionally,
  if there exists a largest $x \in M$ such that $x \circ a \leq b$ for
  any $a, b \in M$, then we denote $x$ by $a \rto b$ and called it
  the \textbf{right-pseudocomplement} of $a$ w.r.t $b$.

  A \textbf{biclosed poset}, $(M, \leq, \circ, e, \lto, \rto)$, is an
  ordered non-commutative monoid, $(M, \leq, \circ, e)$, such that $a
  \lto b$ and $a \rto b$ exist for any $a,b \in M$.
\end{definition}

At this point we have everything we need to model the Lambek Calculus
L without modalities.
\begin{lemma}
  \label{lemma:biclosed-poset-model-L}
  Any biclosed poset $(M, \leq, \circ, e, \lto, \rto)$ is a model for
  the Lambek Calculus L without modalities.
\end{lemma}
\begin{proof}
  First suppose we have an assignment $(-)^0$ which assigns to each
  formula of L an element of $M$.  Then if $[[G |- A]]$ holds we
  show that $([[G]])^0 \leq ([[A]])^0$.  This proof can easily be
  completed by induction on the form $[[G |- A]]$.  
\end{proof}

\section{Categorical Models}

Historically the Lambek calculus arose from its intended categorical model, biclosed symmetric monoidal categories, as discussed by Lambek in \cite{lambek1988}. Clearly all this happened almost three decades  before Girard introduced Linear Logic, hence there were no modalities or exponentials in this setting.


Categorically, one models the of-course modality as a functor endowed with the structure
of a comonad $(!, \delta_A, \varepsilon_A)$ with some additional structure.  

That is, there are maps
$\delta_A : [[!A]] \mto [[!!A]]$ and $\varepsilon_A : [[!A]] \mto [[A]]$
subject to a few coherence diagrams, and maps $c_A : [[!A]] \mto
[[h(!A) (x) !A]]$ and $w_A : [[!A]] \mto [[I]]$.  Using this structure we can
interpret the rules of the of-course modality.  Consider the rule
$\Ldrulename{C}$, and suppose we have a map
$[[G]] \otimes [[(h(!A) (x) !A)]] \mto^{f} [[B]]$, then we can obtain
a new map
$[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes c_A} [[G]] \otimes [[(h(!A) (x) !A)]] \mto^f [[B]]$.
The rule $\Ldrulename{W}$ is similar, but we start with a map $[[G]]
\mto^f [[B]]$ and then we can define the map
$[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes w_A} [[G]] \otimes [[I]] \mto^\cong [[G]] \mto^{f} [[B]]$.
Notice that the previous map exploits the fact that $[[I]]$ is the
unit for tensor.  Now consider the rule $\Ldrulename{Bl}$, and suppose
we have a map $[[!{G}]] \mto^f [[B]]$, then we may obtain a second map
using the fact that of-course is a functor $[[!{G}]] \mto^{\delta}
[[!{!{G}}]] \mto^{!f} [[!B]]$.  Finally, consider the rule
$\Ldrulename{Br}$ and suppose we have a map $[[G]] \otimes [[A]]
\mto^f [[B]]$, then we can construct the map
$[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes \varepsilon_A} [[G]]
\otimes [[A]] \mto^f [[B]]$.  This analysis tells us a few things
about interpreting logics into categorical models.  Sequents, $[[G |-
    B]]$, are interpreted as morphisms, $[[G]] \mto^f [[B]]$, where
$[[G]]$ is $[[I]]$ if it is empty, or it is the tensor product of the
interpretations of its formulas.  Then interpreting inference rules
amounts to starting with the morphisms corresponding to the premises,
and then building a map corresponding to the conclusion.  The
cut-elimination procedure is defined by a set of equations between
derivations, and hence, in the model corresponds to equations between
morphisms.  The various coherence diagrams relating the structure of
the model enforce that these equations hold.

We can similarly interpret the rules for the exchange modality.
That is, as a functor endowed with the structure of a second comonad,
but also with the maps $e_1 : [[A (x) E B]] \mto [[h(E B) (x) A]]$ and
$e_2 : [[h(E A) (x) B]] \mto [[B (x) E A]]$.  Then, each of the
inference rules for the exchange modality can easily be interpreted
into the model.
% section dialectica_lambek_spaces (end)

\section{Dialectica Lambek Spaces}
\label{sec:dialectica_lambek_spaces}

% section dialectica_lambek_spaces (end)
%\section{MultiModalities}

\section{Type Theories}
\label{sec:type_theories}
Putting this here for now.

\begin{figure}
  \begin{mdframed}
    \begin{mathpar}
      \LdruleTXXvar{} \and
      \LdruleTXXcut{} \and
      \LdruleTXXunit{} \and
      \LdruleTXXTl{} \and
      \LdruleTXXTr{} \and
      \LdruleTXXIRl{} \and
      \LdruleTXXILl{} \and
      \LdruleTXXIRr{} \and
      \LdruleTXXILr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Typing Rules for The Typed Lambek Calculus: $\lambda\text{L}$}
  \label{fig:typed-L}
\end{figure}


% section type_theories (end)


\section{Conclusion}

\bibliographystyle{plain}
\bibliography{references}
\end{document}

http://www.di.ens.fr/~zappa/readings/wmm10.pdf
Sewell, Peter, et al. "Ott: effective tool support for the working semanticist." ACM SIGPLAN Notices. Vol. 42. No. 9. ACM, 2007.
https://www.cs.kent.ac.uk/people/staff/sao/documents/icfp07.pdf

\begin{figure}[h!]
\centering
\includegraphics[scale=1.7]{universe.jpg}
\caption{The Universe}
\label{fig:univerise}
\end{figure}
