\documentclass{llncs}
\usepackage[utf8]{inputenc}

\usepackage{amssymb,amsmath}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{mathpartir}
\usepackage[barr]{xy}
\usepackage{mdframed}
\usepackage{bbm}

\let\mto\to                     % Used for arrows
\let\to\relax                   % Used for implication
\newcommand{\to}{\rightarrow}
\newcommand{\id}{\mathsf{id}}
\newcommand{\V}{\text{V}^+}
\newcommand{\N}{\mathcal{N}}
\newcommand{\pow}[1]{\mathcal{P}(#1)}
\newcommand{\rto}{\leftharpoonup}
\newcommand{\lto}{\rightharpoonup}
\newcommand{\LB}{\text{L}_!}
\newcommand{\LE}{\text{L}_\kappa}
\newcommand{\redto}{\rightsquigarrow}
\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\Set}{\mathsf{Set}}
\newcommand{\Dial}[2]{\mathsf{Dial}_{#1}(#2)}
\newcommand{\Hom}[3]{\mathsf{Hom}_{#1}(#2,#3)}

%% Ott includes:
\input{L-inc}
\renewcommand{\Ldrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\,\,\Ldrulename{#4}}}

\begin{document}

\title{Dialectica Categories for the Lambek Calculus\\
    Preliminary Version
}
\author{Valeria de Paiva and Harley Eades III}
\date{}

\institute{Nuance Communications, Sunnyvale, CA \and Computer Science, Augusta University, Augusta, GA}

\maketitle

%\begin{abstract}
%  TODO
%\end{abstract}

\section*{Introduction}
 Lambek  introduced his homonymous calculus (originally called the  `Syntactic Calculus') for  proposed applications in Linguistics.  
 However the calculus got much of its cult following  and reputation by being a convenient, well-behaved prototype of a Gentzen sequent calculus without any structural rules. 

This note recalls a Dialectica model of the Lambek Calculus presented
by the first author in the Amsterdam Colloquium in 1991
\cite{depaiva1991}. Here, like then, we approach the Lambek Calculus
from the perspective of Linear Logic, so we are interested in the
basic sequent calculus with no structural rules, except associativity
of tensors. In that earlier work we took for granted the syntax of the
calculus and only discussed the exciting possibilities of categorical
models of linear-logic-like systems.  Many years later we find that
the work on models is still interesting and novel, and that it might
inform some of the most recent work on the relationship between
categorial grammars and notions of distributional semantics
\cite{coecke2013}.

%% We did not verify the type system.
%% 
%% Moreover, the type theoretical notions that were left undiscussed are
%% now more amenable to verification, using some new automated
%% tools. Since the Amsterdam Colloquium proceedings were never
%% published, we have decided to revisit some of the mathematical work,
%% using the new tools that have been developed for type theory and
%% sequent proof systems in the time that elapsed. Thus, we implement the
%% calculus in Agda \cite{bove2009} and we use \texttt{Ott}
%% \cite{Sewell:2010} to check that we do not have trivial mistakes in
%% our term systems.

Moreover, using the Agda proof assistant \cite{bove2009} we verify the
correctness of our categorical model
(Section~\ref{sec:dialectica_lambek_spaces}), and we add the type
theoretical (Section~\ref{sec:typed_lambek_calculi}) notions that were
left undiscussed in the Amsterdam Colloquium presentation.  All of the
syntax in this paper was checked using \texttt{Ott}
\cite{Sewell:2010}.

The goal is to show that our implementation can shed new light on some
of the issues that remained open.  Mostly we wanted to check the
correctness of the semantic proposals put forward since Szabo's
seminal book \cite{szabo1978} and, for future work, on the
applicability and fit of the original systems to their intended uses.

%% \subsection*{Overview}
\textbf{Overview.} The Syntactic Calculus was first introduced by
Joachim Lambek in 1958 \cite{Lambek1958}. Since then the rechristened
Lambek Calculus has had as its main motivation providing an
explanation of the mathematics of sentence structure, starting from
the author's algebraic intuitions. The Lambek calculus is the core of
logical Categorial Grammar.  The first use of the term “categorial
grammar” seems to be in the title of Bar-Hillel, Gaifman and Shamir
(1960), but categorial grammar began with Ajdukiewicz (1935) quite a
few years earlier. After a period of ostracism, around 1980 the Lambek
Calculus was taken up by logicians interested in Computational
Linguistics, especially the ones interested in Categorial
Grammars. %theories such as Categorial .
% The calculus was considered ``like a logical system" but much too
% weak to be taken seriously as a logic. To quote from van
% Benthem \begin{quotation}One fundamental system of this kind is the
% so-called `Lambek Calculus' whose type-change rules show a close
% analogy with the inference rules of constructive propositional
% logic.  \end{quotation}

The work on Categorial Grammar was given a serious impulse by the
advent of Girard's Linear Logic  at the end of the 1980s.  Girard \cite{Girard:1987}
showed that there is a full embedding, preserving proofs, of
Intuitionistic Logic into Linear Logic with a modality ``!". This
meant that Linear Logic, while paying attention to resources, could
always code up faithfully Classical Logic and hence one could, as
Girard put it, `have one's cake and eat it', paying attention to
resources, if desired, but always forgetting this accounting, if
preferred. This meant also that several new
systems of resource logics were conceived and developed and these
refined resource logics were applied to several areas of Computer
Science.

In Computational Linguistics, the Lambek calculus 
has seen a significant number of works written
about it,  apart from a number of monographs that deal with
logical and linguistic aspects of the generalized type-logical
approach.  
%For general background on the type-logical approach, there are the monographs of Moortgat, Morril, Carpenter and Steedman. 
For a shorter introduction, see Moortgat's entry on the Stanford Encyclopedia of Philosophy  on Type Logical Grammar \cite{MoortgatSEP}.
Type Logical Grammar situates the type-logical approach within the
framework of Montague's Universal Grammar and presents detailed
linguistic analyses for a substantive fragment of syntactic and
semantic phenomena in the grammar of English.  Type Logical Semantics offers a general introduction to natural language semantics studied from a type-logical perspective.
% Moortgat's Categorial Type Logics,
% in the Handbook of Logic ad
% Language


% However, fashion turned against these systems with the rise of
% probabilistic and machine learning systems.

This meant that a series of systems, implemented or not, were devised
that used the Lambek Calculus or its variants as their basis. These
systems can be as expressive as Intuitionistic Logic and the claim is
that they are more precise i.e. they make finer distinctions. Some of
the landscape of calculi can be depicted as follows:
\[
\begin{array}{cccc}
  \bfig
  \Ctriangle/-``-/<400,400>[
    \textbf{LJ}_{\textbf{imp}}`
    \textbf{LP}_{\textbf{cont}}`
    \textbf{LP};``]

  \Dtriangle(400,0)/`-`-/<400,400>[
    \textbf{LJ}_{\textbf{imp}}`
    \textbf{LP}_{\textbf{weak}}`
    \textbf{LP};``]

  \morphism(400,0)<0,-300>[\textbf{LP}`\textbf{L};]
  \efig
  & \quad &
  \bfig
  \Ctriangle/-``-/<400,400>[
    \textbf{ILL}`
    \textbf{LA}`
    \textbf{L};``]

  \Dtriangle(400,0)/`-`-/<400,400>[
    \textbf{ILL}`
    \textbf{LP}`
    \textbf{L};``]
  \morphism(400,0)//<0,-300>[`;]
  \efig
\end{array}
\]

From the beginning it was clear that the Lambek Calculus is the
multiplicative fragment of non-commutative Intuitionistic Linear
Logic. In the diagrams $\bf L$ stands for the Lambek calculus, as
expounded in \cite{Lambek1958} but with the unit $I$ added for the
tensor connective (there was a certain amount of dispute on that, as
the original system did not introduce the constant corresponding to
the nullary case of the tensor product, here written as $I$). The
system $\bf{LP}$ is the Lambek calculus with permutation, sometimes
called the van Benthem calculus. We are calling $\bf{LA}$ the Lambek
calculus with additives, the more usual algebraic connectives
corresponding to meet and join. Hence adding both permutation and
additives to the Lambek calculus we get to intuitonistic linear
logic. On the other diagram to the Lambek calculus with permutation we
add either weakening ($\bf{LP_{weak}}$) or contraction
$\bf{LP_{weak}}$) or both to get the implicational fragment of
Intuitionsitic Propositional Logic.

The Lambek Calculus also has the potential for many applications in
other areas of computer science, such as, modeling processes.  Linear
Logic has been at the forefront of the study of process calculi for
many years \cite{HONDA20102223,Pratt:1997,ABRAMSKY19945}. We can think
of a the commutative tensor product of linear logic as a parallel
operator.  For example, given a process $[[A]]$ and a process $[[B]]$,
then we can form the process $[[A (x) B]]$ which runs both processes
in parallel.  If we remove commutativity from the tensor product we
obtain a sequential composition instead of parallel composition.  That
is, the process $[[A]] \rhd [[B]]$ first runs process $[[A]]$ and then
process $[[B]]$ in that order.  Paraphrasing Vaughan Pratt, ``The
sequential composition operation has no evident counterpart in type
theory'' see page 11 of \cite{Pratt:1997}.  We believe that the Lambek
calculus will lead to filling this hole, and the results of this paper
as a means of obtaining a theory with both a parallel operator and a
sequential composition operator.  This work thus has a potential to
impact research in programming languages and computer security where
both linear logic and sequential composition play important roles.

There are several interesting questions, considered for Linear Logic,
that could also be asked of the Lambek Calculus or its extensions.
One of them, posed by Morrill et al is whether we can extend the
Lambek calculus with a modality that does for the structural rule of
\textit{(exchange)} what the modality \textit{of course} `!' does for
the rules of \textit{(weakening)} and \textit{(contraction)}.  A
preliminary proposal, which answers this question affirmatively, is
set forward in this paper. The answer was provided in semantical terms
in the first version of this work. Here we provide also the more
syntactic description of these modalities. Building up from work of
Ciabattoni, Galatos and Terui in \cite{Ciabattoni2012} and others that
describe how to transform systems of axioms into cut-free sequent
rules, we aim to refine the algebraization of proof theory.

%amount of work in Type Logical The Proof Theory of the systems
%considered should be investigated in future work. Another warning is
%that the perspective of this note is basically from Category Theory
%as a branch of Mathematics, so words like categories and functors are
%always meant in their mathematical, rather than linguistical or
%philosophical sense.


We first recall  that
%Linear Logic and provide the transformations to show that 
the Lambek Calculus \textsf{L} as the multiplicative
fragment of non-commutative Intuitionistic Linear Logic.  Then we describe the usual algebraic semantics for the Lambek Calculus, including Lambek's original String Semantics, and generalize it, using a categorical perspective.  The next section recalls Dialectica models and defines them for the Lambek Calculus. Then we discuss type theory for the systems considered, proving the requisite theorems.
Finally, we discuss modalities for the Lambek calculus and conclude with some discussion of the possible choices in this space.
%in the fifth section we discuss modalities
%and some untidiness of the Curry-Howard correspondence for the fragments of Linear Logic in question.

\section{The Lambek Calculus}

The Lambek Calculus, formerly the Syntactic Calculus $\sf L$, due to
J.  Lambek \cite{Lambek1958}, was created to capture the logical
structure of sentences.  Lambek introduced what we think of as a
substructural logic with an operator denoting concatenation,
$[[A (x) B]]$, and two implications relating the order of phrases,
$[[A <- B]]$ and $[[A -> B]]$.  The first implication corresponds to a
phrase of type $[[A]]$ when followed by a phrase of type $[[B]]$, and
the second is a phrase of type $[[B]]$ when proceeded by a phrase of
type $[[A]]$.

The Lambek Calculus, defined in Figure~\ref{fig:L}, can be presented
as a non-commutative intuitionistic multiplicative linear logic.
Contexts are sequences of formulas, and we denote mapping the
modalities over an arbitrary context by $[[!{ G }]]$ and $[[E{ G }]]$.
%% \[
%% \begin{array}{lll}
%%   \text{(formulas)} & [[A]],[[B]],[[C]] ::= [[I]] \mid [[A (x) B]] \mid [[A <- B]] \mid [[A -> B]]\\
%%   \text{(contexts)} & [[G]] ::= [[A]] \mid [[G1,G2]]\\
%% \end{array}
%% \]
%% 
\begin{figure}
  \begin{mdframed}
    \begin{mathpar}
      \Ldruleax{} \and
      \LdruleUr{} \and      
    \Ldrulecut{} \and
    \LdruleUl{} \and
    \LdruleTl{} \and
    \LdruleTr{} \and
    \LdruleIRl{} \and
    \LdruleILl{} \and
    \LdruleIRr{} \and
    \LdruleILr{}     
  \end{mathpar}
  \end{mdframed}
    
  \caption{The Lambek Calculus: L}
  \label{fig:L}
\end{figure}

Because the operator $[[A (x) B]]$ denotes the type of concatenations
the types $[[A (x) B]]$ and $[[B (x) A]]$ are not equivalent, and
hence, \textsf{L} is non-commutative which explains why implication
must be broken up into two operators $[[A <- B]]$ and $[[A -> B]]$.
In the following subsections we give two extensions of L: one with the
well-known modality of-course of linear logic which adds weakening and
contraction, and a second with a new modality adding exchange.

\section{
%Adding Weakening and Contraction 
Extensions to the Lambek Calculus}
\label{subsec:the_lambek_calculus_with_the_weakening_and_contraction_modality}

The linear modality, $[[! A]]$, read ``of-course $[[A]]$'' was first
proposed by Girard \cite{Girard:1987} as a means of encoding
non-linear logic in both classical and intuitionistic forms in linear
logic.  For example, non-linear implication $[[A -> B]]$ is usually
encoded into linear logic by $[[!A]] \multimap [[B]]$. Since we have
based L on non-commutative intuitionistic linear logic it is
straightforward to add the of-course modality to L.  The rules for the
of-course modality are defined by the following rules:
\[
\small
\begin{array}{ccccccccccc}
  \LdruleC{} & \quad & \LdruleW{} & \quad & 
  \LdruleBr{} & \quad & \LdruleBl{}
\end{array}
\]
The rules $\Ldrulename{C}$ and $\Ldrulename{W}$ add contraction and
weakening to L in a controlled way.  Then the other two rules allow
for linear formulas to be injected into the modality; and essentially
correspond to the rules for necessitation found in S4
\cite{bierman2000}.  Thus, under the of-course modality the logic
becomes non-linear. We will see in
Section~\ref{sec:dialectica_lambek_spaces} that these rules define a
comonad.  We call the extension of L with the of-course modality
$\LB$.
% subsection the_lambek_calculus_with_the_weakening_and_contraction_modality (end)

\subsection{Adding Exchange to the Lambek Calculus}
\label{subsec:the_lambek_calculus_with_the_exchange_modality}
As we remarked above, one leading question of the Lambek Calculus is
can exchange be added in a similar way to weakening and contraction?
That is, can we add a new modality that adds the exchange rule to L in
a controlled way?  The answer to this question is positive, and the
rules for this new modality are as follows:
\[
\small
\begin{array}{ccccccccccccccccccccc}  
  \LdruleEr{} & & \LdruleEl{} & & \LdruleEOne{} & & \LdruleETwo{} 
\end{array}
\]
The first two rules are similar to of-course, but the last two add
exchange to formulas under the $\kappa$-modality.  We call L with the
exchange modality $\LE$.  Thus, unlike intuitionistic linear logic
where any two formulas can be exchanged $\LE$ restricts exchange to
only formulas under the exchange modality.  Just like of-course
the exchange modality is modeled categorically as a comonad; see
Section~\ref{sec:dialectica_lambek_spaces}.
% subsection the_lambek_calculus_with_the_exchange_modality (end)

\section{Algebraic Semantics}

In Lambek's original paper \cite{Lambek1958} 
%introducing his calculus L, albeit without modalities, 
he introduced an algebraic semantics
that is now called the String Semantics for L.  The semantics begins
with a non-empty set of expressions denoted $\V$, and then by modeling
formulas of L by subsets of $\V$ it proceeds by defining operations on
these subsets, which correspond to the logical connectives of L.  Each
operation is defined as follows (using our notation for the logical
connectives):
\vspace{-7px}
\[
\begin{array}{l}
  [[A (x) B]] = \{xy \in \V \mid x \in A \text{ and } y \in B\}\\
  [[A <- B]] = \{x \in \V \mid \text{for all } y \in B, xy \in A\}\\ 
  [[A -> B]] = \{y \in \V \mid \text{for all } x \in A, xy \in B\}
\end{array}
\vspace{-7px}
\]
Let $\N = \pow{\V}$ be the powerset of $\V$.  Then we can view each of
the above definitions as binary operations with type $\N \times \N \mto
\N$. In fact, $\N$ has a natural order induced by set containment, and
concatenation, $[[A (x) B]]$, gives $\N$ a non-commutative monoidal
structure, where the unit $[[I]] = \{\epsilon\}$ is the set containing
the empty sequence:
\vspace{-7px}
\[
\begin{array}{lll}
  \text{(associativity)} & [[A (x) (B (x) C)]] = [[(A (x) B) (x) C]]\\
  \text{(unit)} & [[A (x) I]] = [[A]] = [[I (x) A]]\\
  \text{(non-commutativity)} & [[A (x) B]] \neq [[B (x) A]]\text{, in general}
\end{array}
\vspace{-7px}
\]

There happens to be a more general structure underlying the previous
semantics.  We now make this structure explicit using the tools
developed by Hyland and de Paiva \cite{Hyland:1991}. The ordering on
$\N$ induces a poset $(\N, \subseteq)$, but even more so, $\N$ is also
a monoid $(\N, \otimes, I)$, but that is not all, these two structures
are compatible, that is, given $A \subseteq B$ the following hold:
\vspace{-7px}
\[
  \begin{array}{cll}
    [[A (x) C]] \subseteq [[B (x) C]]\text{, for all } C \in \N & \quad &
    [[C (x) A]] \subseteq [[C (x) B]]\text{, for all } C \in \N
  \end{array}
  \vspace{-7px}
\]
Abstracting this structure out yields what can be called an ordered
non-commutative monoid. Other names can also be used, like FL-algebras, for Full Lambek algebras. The literature is extense, \cite{Pentus1995} discusses some of it.

\begin{definition}
  \label{def:ordered-non-comm-monoid}
  An \textbf{ordered non-commutative monoid}, $(M,\leq,\circ,e)$, is a
  poset $(M,\leq)$ with a given compatible monoidal structure $(M,
  \circ, e)$.  That is, a set $M$ equipped with a binary relation,
  $\leq : M \times M \mto \mathsf{2}$, satisfying:
  \begin{center}
    \begin{tabular}{cll}
    \text{(reflexivity)} & $a \leq a$ for all $a \in M$\\
    \text{(transitivity)} &  $a \leq b$ and $b \leq c$, implies that $a
    \leq c$ for all $a, b , c \in M$\\
    \text{(antisymmetry)} &  $a \leq b$ and $b \leq a$, implies that $a = b$
    \end{tabular}
  \end{center}
  together with a monoidal multiplication $\circ : M \times M \mto M$
  and a distinguished object $e \in M$ satisfying the following:
  \begin{center}
    \vspace{-3px}
    \begin{tabular}{cccccc}
    \text{(associativity)} & $a \circ (b \circ c) = (a \circ b) \circ c$ & \quad\quad & \text{(identity)} & $e \circ a = a = a \circ e$
    \end{tabular}
  \end{center}
  The structures are compatible in the sense that, if $a \leq b$, then
  the following hold:
  \begin{center}
    \vspace{-7px}
    \begin{tabular}{lll}
      $a \circ c \leq b \circ c$ for any $c \in M$ & \quad & $c \circ a \leq c \circ b$ for any $c \in M$
    \end{tabular}
    \vspace{-7px}
  \end{center}
\end{definition}
It is easy to see that the previous definition accounts for all of the
structure we have described so far, and thus, we may conclude that
$(\N, \subseteq, \otimes, I)$ is an ordered non-commutative monoid,
however, this definition is not able to model the implication
operations $[[A <- B]]$ and $[[A -> B]]$.  To do this we need to
understand how implication relates to the ordered non-commutative
monoid structure.  Notice that
$[[A (x) (A -> B)]] \subseteq B$ and $[[(A <- B) (x) A]] \subseteq B$
hold.

Furthermore, there are no larger objects of $\N$ with these
properties.  Abstracting this results in the notion of a biclosed
poset.
\begin{definition}
  \label{def:biclosed-poset}
  Suppose $(M, \leq, \circ, e)$ is an ordered non-commutative monoid.
  If there exists a largest $x \in M$ such that $a \circ x \leq b$ for
  any $a, b \in M$, then we denote $x$ by $a \lto b$ and called it
  the \textbf{left-pseudocomplement} of $a$ w.r.t $b$.  Additionally,
  if there exists a largest $x \in M$ such that $x \circ a \leq b$ for
  any $a, b \in M$, then we denote $x$ by $a \rto b$ and called it
  the \textbf{right-pseudocomplement} of $a$ w.r.t $b$.

  A \textbf{biclosed poset}, $(M, \leq, \circ, e, \lto, \rto)$, is an  ordered non-commutative monoid, $(M, \leq, \circ, e)$, such that $a
  \lto b$ and $a \rto b$ exist for any $a,b \in M$.
\end{definition}

At this point we have everything we need to model the Lambek Calculus L without modalities algebraically.
\begin{lemma}
  \label{lemma:biclosed-poset-model-L}
  Any biclosed poset $(M, \leq, \circ, e, \lto, \rto)$ is a model for  the Lambek Calculus L without modalities.
\end{lemma}
\begin{proof}
  First suppose we have an assignment $(-)^0$ which assigns to each
  formula of L an element of $M$.  Then if $[[G |- A]]$ holds we
  show that $([[G]])^0 \leq ([[A]])^0$.  This proof can easily be
  completed by induction on the form $[[G |- A]]$.  
\end{proof}

\subsection{Two  Algebraic Models}
\label{subsec:two_example_algebraic_models}

The algebraic structures (closed and biclosed posets) have been studied before and, the structure underlying the
connection between the (left and right) implications and the tensor, traditionally  called a residuated structure, is the essential one. It is worth noticing that  examples of these structures already appear in the work of Lawvere \cite{lawvere1973}. We recall two of these  examples, as they will be useful in the sequel.  
We show that the set of invertible matrices over the set of
natural numbers, $\mathbb{N}$, is a biclosed poset, and that $\mathbb{N}$ is itself a biclosed poset.
\vspace{-10px}
\subsubsection{The Set of Invertible Matrices as a Model for L}
\label{subsec:the_set_of_invertible_matrices}

Consider the set $\mathcal{M}$ of square \textit{invertible} matrices with
natural number entries.  We denote matrices by Greek letters $\alpha$,
$\beta$, etc.  It is easy to see that $\mathcal{M}$ is closed under
matrix multiplication, and thus, we have an operation $\otimes :
\mathcal{M} \times \mathcal{M} \mto \mathcal{M}$.  Furthermore, matrix
multiplication has the following properties:
\begin{itemize}
\item it is non-commutative, that is $\alpha \otimes \beta
  \neq \beta \otimes \alpha$, for any $\alpha,\beta \in \mathcal{M}$,
\item for each dimension, $n$, there is an identity matrix, $I_n$, and hence,
  $\alpha \otimes I_n = I_n \otimes \alpha = \alpha$ for any $\alpha \in
  \mathcal{M}$ of dimension $n$, and
\item matrix multiplication is associative, that is, $(\alpha \otimes
  \beta) \otimes \gamma = \alpha \otimes (\beta \otimes \gamma)$ for any
  $\alpha,\beta,\gamma \in \mathcal{M}$.
\end{itemize}
There is a preorder on $\mathcal{M}$ defined by
$\alpha \leq \beta \text{ iff } \alpha^{-1} \otimes \beta \leq I$.
This preorder can be extended to a poset by taking the equivalence
classes using the usual construction. In addition, the order on
$\mathcal{M}$ is compatible with matrix multiplication.  Thus,
$(\mathcal{M}, \leq, \otimes, I)$ is an ordered non-commutative
monoid.  Now we can define two new operations on $\mathcal{M}$, $(-)
\lto (-)$ and $(-) \rto (-)$, both of the form $\mathcal{M}^{op}
\times \mathcal{M} \mto \mathcal{M}$ by $\alpha \lto \beta =
\alpha^{-1} \otimes \beta$ and $\alpha \rto \beta = \beta^{-1} \otimes
\alpha$.  Thus, we now have the following:
\begin{lemma}
  \label{lemma:M-is-biclosed-poset}
  The ordered monoid of invertible square $n \times n$ matrices over
  $\mathbb{N}$, $(\mathcal{M},\leq,\otimes,I,\lto,\rto)$, is a
  biclosed poset.
\end{lemma}
This then implies that $(\mathcal{M},\leq,\otimes,I,\lto,\rto)$ is a
model of the Lambek Calculus.  There are several other models as well,
for example, modules of rings.  According to Lambek the idea for the
Syntactic Calculus came from algebraic models.  It is easy to see that
if one has a $n$-ordered group, i.e. the possibility of inverting
elements of a non-symmetric ordered monoid, we will have a biclosed
poset.
% subsubsection the_set_of_invertible_matrices (end)
\vspace{-10px}
\subsubsection{The Natural Numbers as a Model for LP}
\label{subsec:the_set_of_natural_numbers}
The calculus with permutations, $\textbf{LP}$, has a model in the natural numbers.
%; as well as the reals.  
The set of natural numbers is
clearly a symmetric closed poset, where conjunction is addition, $0$ is the unit and the
internal-hom is given by truncated subtraction, as in Lawvere \cite{lawvere1973} (also in  \cite{depaiva1991, Hyland:1991}).  It is easy
to prove the adjunction and another easy argument on Lindenbaum's construction  proves completeness of the model.

These examples have been known for several decades, since historically, the Lambek calculus arose from its intended categorical model, (bi)closed (symmetric and non-symmetric) monoidal categories, as discussed by Lambek \cite{lambek1988}. However they have been brought back ot fashion by work in distributional semantics \cite{coecke2013}.

%In the next section we describe another model for the Lamb ek Calculus�� but this time a categorical one�� that is�� one where we take in consideration di��erent pro ofs of the same entailment�� Note that we used a similar notation for matrices and strings�� to emphasize that what matters is the structure of a biclosed ��or closed�� p oset��
% subsubsection the_set_of_natural_numbers (end)
% subsection two_example_algebraic_models (end)

\section{Categorical Models}

Having discussed algebraic, poset-like models of the Lambek calculus,
we now want to talk about categorical models, ones where one considers
different proofs of the same theorem. Since the Lambek calculus itself
came from its categorical models, biclosed monoidal categories, there
is no shortage of these models. However, Girard's insight of relating
logical systems via modalities should also be considered in this
context.

Lambek's work on monoidal biclosed categories happened almost three
decades before Girard introduced Linear Logic, hence there were no
modalities or exponentials in Lambek's setting. The categorical
modelling of the modalities (of-course! and why-not?) was the
difficult issue with Linear Logic.
%the one the caused the existence of different schools. 
This is where there are design decisions to be made. We discuss ours
in Section~\ref{subsec:modalities}.

\iffalse
Categorically, one models the of-course modality as a functor endowed with the structure of a monoidal comonad $(!, \delta_A, \varepsilon_A)$ with
some additional structure.  The comonad structure consists of maps
$\delta_A : [[!A]] \mto [[!!A]]$ and $\varepsilon_A : [[!A]] \mto [[A]]$
subject to some coherence diagrams, and maps $c_A : [[!A]] \mto
[[h(!A) (x) !A]]$ and $w_A : [[!A]] \mto [[I]]$ that duplicate and erase assumptions.  Using this structure we can
interpret the rules of the of-course modality.

Consider the rule $\Ldrulename{C}$ from Section~\ref{subsec:the_lambek_calculus_with_the_weakening_and_contraction_modality},
and suppose we have a map $[[G]]
\otimes [[(h(!A) (x) !A)]] \mto^{f} [[B]]$, then we can obtain a new
map $[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes c_A} [[G]] \otimes
[[(h(!A) (x) !A)]] \mto^f [[B]]$.  The rule $\Ldrulename{W}$ is
similar, but we start with a map $[[G]] \mto^f [[B]]$ and then we can
define the map $[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes w_A}
[[G]] \otimes [[I]] \mto^\cong [[G]] \mto^{f} [[B]]$.  Notice that the
previous map exploits the fact that $[[I]]$ is the unit for tensor.
Now consider the rule $\Ldrulename{Bl}$, and suppose we have a map
$[[!{G}]] \mto^f [[B]]$, then we may obtain a second map using the
fact that of-course is a functor $[[!{G}]] \mto^{\delta} [[!{!{G}}]]
\mto^{!f} [[!B]]$.  Finally, consider the rule $\Ldrulename{Br}$ and
suppose we have a map $[[G]] \otimes [[A]] \mto^f [[B]]$, then we can
construct the map $[[G]] \otimes [[!A]] \mto^{\id_{[[G]]} \otimes
  \varepsilon_A} [[G]] \otimes [[A]] \mto^f [[B]]$.
  
  We can similarly interpret the rules for the exchange modality.
That is, as a functor endowed with the structure of a second comonad,
but also with the maps $e_1 : [[A (x) E B]] \mto [[h(E B) (x) A]]$ and
$e_2 : [[h(E A) (x) B]] \mto [[B (x) E A]]$.  Then, each of the
inference rules for the exchange modality can easily be interpreted
into the model.
\fi 

%This analysis tells us a few things about 
We assume that, interpreting logics into
categorical models, formulas are objects of some appropriate category and sequents, $[[G |- B]]$, are interpreted as morphisms, $[[G]] \mto^f [[B]]$, where $[[G]]$ is $[[I]]$ if it is
empty, or it is the tensor product of the interpretations of its formulas.  Interpreting inference rules amounts to starting with
the morphisms corresponding to the premises, and then building a map
corresponding to the conclusion.  The cut-elimination procedure is
defined by a set of equations between derivations, and hence, in the
model corresponds to equations between morphisms.  The various
coherence diagrams relating the structure of the model enforce that
these equations hold. We will see this for the different systems below.



\subsection{Dialectica Lambek Spaces}
\label{sec:dialectica_lambek_spaces}

A sound and complete categorical model of  the Lambek calculi
 can be given using a modification of de Paiva's
dialectica categories \cite{depaiva1990}.  Dialectica
categories arose from de Paiva's thesis on a categorical model
of G\"odel's Dialectica interpretation, hence the name.  Dialectica
categories were one of the first sound categorical models of
intuitionistic linear logic, with  linear modalities.  We show in
this section that they can be adapted to become a sound and complete model for the Lambek calculus, with both the
exchange and of-course modalities. We call this model  \textit{dialectica Lambek spaces}.

Due to the complexities of working
with dialectica categories we have formally verified\footnote{The complete formalization can be
  found online at
  \url{https://github.com/heades/dialectica-spaces/blob/Lambek/NCDialSets.agda}.} this section in
the proof assistant Agda~\cite{bove2009}.
Dialectica categories arise as constructions over a given monoidal
category.  Suppose $\cat{C}$ is such a category.  Then in complete
generality the objects of the dialectica category over $\cat{C}$ are
triples $(U, X, \alpha)$ where $U$ and $X$ are objects of $\cat{C}$,
and $\alpha : A \mto U \otimes X$ is a subobject of the tensor product
in $\cat{C}$ of $U$ and $X$.  Thus, we can think of $\alpha$ as a
relation over $U \otimes X$.  If we specialize the category $\cat{C}$
to the category of sets and functions, $\Set$, then we obtain what is
called a dialectica space. Dialectica spaces are a useful model of
full intuitionistic linear logic \cite{Hyland:1993}.

Morphisms between objects $(U, X, \alpha)$ and $(V, Y, \beta)$ are
pairs $(f, F)$ where $f : U \mto V$ and $F : Y \mto X$ are morphisms
of $\cat{C}$ such that the pullback condition 
$(U \otimes F)^{-1}(\alpha) \leq (f \otimes Y)^{-1}(\beta)$ holds.
In dialectica spaces this condition becomes
$\forall u \in U.\forall y \in Y. \alpha(u , F(y)) \leq \beta(f(u), y)$.
The latter reveals that we can think of the condition on morphisms as
a weak form of an adjoint condition.  Finally, through some nontrivial reasoning
on this structure we can show that this is indeed a category; for the
details see the formal development.  Dialectica categories are related
to the Chu construction \cite{depaiva2007} and to Lafont and Streicher's category of games $\text{GAME}_{\kappa}$~\cite{lafont1991}.

To some extent the underlying category $\cat{C}$ controls the kind of
structure we can expect in the dialectica category over $\cat{C}$. However,
de Paiva  showed \cite{depaiva2007} that by changing the relations used in
the objects and the order used in the  `adjoint condition' (which also
controls the type of structure) we can obtain a non-symmetric tensor in the dialectica category, if the structure of the underlying category and the structure of the underlying relations are compatible. 
She also showed that one can
abstract the notion of relation out as a parameter in the dialectica
construction, so long as this has enough structure, i.e. so long as you have a algebra (that she called a lineale) to evaluate the relations at. 
We denote this construction by $\mathsf{Dial}_{L}(\cat{C})$ where $L$ is the lineale controlling the relations coming from the monoidal category $\cat{C}$. For example, $\mathsf{Dial}_{\mathsf{2}}(\Set)$ is the
category of usual dialectica spaces of sets over the Heyting (or Boolean) algebra $2$. 

This way we can see dialectica categories as a framework of categorical models of various logics, varying the underlying category $\cat{C}$ as well as the underlying lineale or algebra of relations $L$. Depending on which category we start with and which structure we use for the relations in the construction we will obtain different models for different logics.

The underlying category we will choose here is the category $\Set$,
but the structure we will define our relations over will be a biclosed
poset (Definition~\ref{def:biclosed-poset}).
\begin{definition}
  \label{def:dialectica-lambek-spaces}
  Suppose $(M, \leq, \circ, e, \lto, \rto)$ is a biclosed poset. Then
  we define the category of \textbf{dialectica Lambek spaces},
  $\mathsf{Dial}_M(\Set)$, as follows:
  \begin{itemize}
  \item[-] objects, or dialectica Lambek spaces, are triples $(U, X,
    \alpha)$ where $U$ and $X$ are sets, and $\alpha : U \times X \mto
    M$ is a generalized relation over $M$, and

  \item[-] maps that are pairs $(f, F) : (U , X, \alpha) \mto (V , Y ,
    \beta)$ where $f : U \mto V$, and $F : Y \mto X$ are functions
    such that the weak adjointness condition
    $\forall u \in U.\forall y \in Y. \alpha(u , F(y)) \leq \beta(f(u), y)$
    holds.
  \end{itemize}
\end{definition}
Notice that the biclosed poset is used here as the target of the
relations in objects, but also as providing the order  relation in the weak adjoint condition on morphisms.  This will allow the structure of the biclosed
poset to lift up into $\Dial{M}{\Set}$.

We will show that $\Dial{M}{\Set}$ is a model of the Lambek calculus with
modalities.  First, we show that it is a model of the Lambek calculus
without modalities.  Thus, we must show that $\Dial{M}{\Set}$ is
monoidal biclosed.

\begin{definition}
  \label{def:dial-monoidal-structure}
  Suppose $(U, X, \alpha)$ and $(V, Y, \beta)$ are two objects of
  $\Dial{M}{\Set}$. Then their tensor product is defined as follows:
  \[
  (U, X, \alpha) \otimes (V, Y, \beta) = (U \times V, (V \to X) \times (U \to Y), \alpha \otimes \beta)
  \]
  where $- \to -$ is the function space from $\Set$, and $(\alpha
  \otimes \beta)((u, v), (f, g)) = \alpha(u, f(v)) \circ \beta(g(u), v)$.
\end{definition}

\noindent
The identity of the tensor product just defined is $I = (\mathbbm{1},
\mathbbm{1}, e)$, where $\mathbbm{1}$ is the terminal object in
$\Set$, and $e$ is the unit of the biclosed poset.  It is
straightforward to show that the tensor product is functorial, one can
define the left and right unitors, and the associator for tensor; see
the formalization for the definitions.  In addition, all of the usual
monoidal diagrams hold \cite{depaiva1990}.  Take note of the fact that
this tensor product is indeed non-commutative, because the
non-commutative multiplication of the biclosed poset is used to define
the relation of the tensor product.

The tensor product has two right adjoints making $\Dial{M}{\Set}$
biclosed.
\begin{definition}
  \label{def:dial-is-biclosed}
  Suppose $(U, X, \alpha)$ and $(V, Y, \beta)$ are two objects of
  $\Dial{M}{\Set}$. Then two internal-homs can be defined as follows:
  \[
  \begin{array}{lll}
    (U, X, \alpha) \lto (V, Y, \beta) = ((U \to V) \times (Y \to X), U \times Y, \alpha \lto \beta)\\
    (V, Y, \beta) \rto (U, X, \alpha) = ((U \to V) \times (Y \to X), U \times Y, \alpha \rto \beta)\\
  \end{array}
  \]
\end{definition}
These two definitions are functorial, where the first is contravariant
in the first argument and covariant in the second, but the second
internal-hom is covariant in the first argument and contravariant in
the second.  The relations in the previous two definitions prevent
these two from collapsing into the same object, because of the use of
the left and right pseudo-complements. It is straightforward to show
that the following bijections hold:
\[
\begin{array}{lll}
  \Hom{}{A \otimes B}{C} \cong \Hom{}{B}{A \lto C} & \quad &  \Hom{}{A \otimes B}{C} \cong \Hom{}{A}{C \rto B}
\end{array}
\]
Therefore, $\Dial{M}{\Set}$ is biclosed, and we obtain the following
result.
\begin{theorem}
  \label{thm:sound-lambek}
  $\Dial{M}{\Set}$ is a sound and complete model for the Lambek
  calculus $L$ without modalities.
\end{theorem}
\vspace{-15px}
\subsubsection{Lambek Modalities}
\label{subsec:modalities}
We now extend $\Dial{M}{\Set}$ with two modalities: the usual
modality, of-course, denoted $!A$, and the exchange modality denoted
$\kappa A$.  However, we must first extended biclosed posets to
include an exchange operation.

\begin{definition}
  \label{def:biclosed-exchange}
  A \textbf{biclosed poset with exchange} is a poset $(M, \leq, \circ,
  e, \lto, \rto)$ equipped with an unary operation $\kappa : M \to M$
  satisfying the following:
  \[
  \begin{array}{clr}
    \text{(Compatibility)} & a \leq b \text{ implies } \kappa a \leq \kappa b \text{ for all } a,b,c \in M\\
    \text{(Minimality)} & \kappa a \leq a \text{ for all } a \in M\\
    \text{(Duplication)} & \kappa a \leq \kappa\kappa a \text{ for all } a \in M\\
    \text{(Left Exchange)} & \kappa a \circ b \leq b \circ \kappa a \text{ for all } a, b \in M\\
    \text{(Right Exchange)} & a \circ \kappa b \leq \kappa b \circ a \text{ for all } a, b \in M\\
  \end{array}
  \]
\end{definition}
\noindent
Compatibility results in $\kappa : M \to M$ being a functor in the
biclosed poset, and the remainder of the axioms imply that $\kappa$ is
a comonad extending the biclosed poset with left and right exchange.

We can now define the two modalities in $\Dial{M}{\Set}$ where $M$ is
a biclosed poset with exchange; clearly we know $\Dial{M}{\Set}$ is
also a model of the Lambek calculus without modalities by
Theorem~\ref{thm:sound-lambek} because $M$ is a biclosed poset.
\begin{definition}
  \label{def:modalities-dial}
  Suppose $(U, X, \alpha)$ is an object of $\Dial{M}{\Set}$ where $M$
  is a biclosed poset with exchange. Then the \textbf{of-course} and
  \textbf{exchange} modalities can be defined as 
  $! (U, X, \alpha) = (U, U \to X^*, !\alpha)$ and
  $\kappa (U, X, \alpha) = (U, X, \kappa \alpha)$
  where $X^*$ is the free commutative monoid on $X$, $(!\alpha)(u, f)
  = \alpha(u, x_1) \circ \cdots \circ \alpha(u, x_i)$ for $f(u) =
  (x_1, \ldots, x_i)$, and $(\kappa \alpha)(u, x) = \kappa (\alpha(u,
  x))$.
\end{definition}
This definition highlights a fundamental difference between the two
modalities.  The definition of the exchange modality relies on an
extension of biclosed posets with essentially the exchange modality in
the category of posets.  However, the of-course modality is defined by
the structure already present in $\Dial{M}{\Set}$, specifically, the
structure of $\Set$.

Both of the modalities have the structure of a comonad.  That is,
there are monoidal natural transformations $\varepsilon_! : !A \mto
A$, $\varepsilon_\kappa : \kappa A \mto A$, $\delta_! : !A \mto !!A$,
and $\delta_\kappa : \kappa A \mto \kappa\kappa A$ which satisfy the
appropriate diagrams; see the formalization for the full
proofs. Furthermore, these comonads come equipped with arrows $e : !A
\mto I$, $d : !A \mto !A \otimes !A$, $\beta L : \kappa A \otimes B \mto B
\otimes \kappa A$, and $\beta R : A \otimes \kappa B \mto \kappa B
\otimes A$.  Thus, we arrive at the following result.

\begin{theorem}
  \label{thm:sound-dial-exchange-!}
  Suppose $M$ is a biclosed poset with exchange.  Then
  $\Dial{M}{\Set}$ is a sound and complete model for the Lambek
  calculi $L_!$, $L_\kappa$, and $L_{!\kappa}$.
\end{theorem}
% subsubsection modalities (end)
% end subsection dialectica_lambek_spaces (end)
% end section categorical_models (end)

\section{Type Theory for Lambek Systems}
\label{sec:typed_lambek_calculi}
In this section we introduce typed calculi for each of the logics
discussed so far.  Each type system is based on the term assignment
for  Intuitionistic Linear Logic introduced 
%by Hyland and de Paiva \cite{Hyland:1993}. 
in \cite{benton1993}.
We show that they are all strongly normalizing
and confluent, but we do not give full detailed proofs of each of
these properties, because they are straightforward consequences of the
proofs of strong normalization and confluence for intuitionistic
linear logic.  In fact, we will reference Bierman's thesis often
within this section.  The reader may wish to review Section~3.5 on
page 88 of \cite{Bierman:1994}.

\subsection{The Typed Lambek Calculus: $\lambda\text{L}$}
\label{subsec:the_typed_lambek_calculus_lambda-l}

The first system we cover is the Lambek calculus without
modalities. This system can be seen as the initial core of each of the
other systems we introduce below, and thus, we will simply extend the
results here to those other systems.  

The syntax for patterns, terms, and contexts are described by the
following grammar:
\[
\begin{array}{cll}
  \text{(patterns)} & [[p]] := [[h]] \mid [[x]] \mid [[punit]] \mid [[p1 (x) p2]]\\
  \text{(terms)}    & [[t]] := [[x]] \mid [[unit]] \mid [[t1 (x) t2]] \mid [[\l x : A.t]] \mid [[\r x : A.t]] \mid
  [[appl t1 t2]] \mid \\ & [[appr t1 t2]] \mid [[let t1 be p in t2]]\\
  \text{(contexts)} & [[G]] := [[.]] \mid [[x : A]] \mid [[G1,G2]]\\
\end{array}
\]
Contexts are sequences of pairs of free variables and types.  Patterns
are only used in the let-expression which is itself used to eliminate
logical connectives within the left rules of L.  All variables in the
pattern of a let-expression are bound.  The remainder of the terms are
straightforward.

The typing rules can be found in  the appendix in Figure~\ref{fig:typed-L} and the reduction rules in Figure~\ref{fig:rewrite-L}. The typing rules are as one might expect.  The reduction rules were extracted from the cut-elimination procedure for L.  



\iffalse
\begin{figure}[h]
  \begin{mdframed}
    \begin{mathpar}
      \LdruleTXXvar{} \and
      \LdruleTXXUr{} \and
      \LdruleTXXcut{} \and
      \LdruleTXXUl{} \and
      \LdruleTXXTl{} \and
      \LdruleTXXTr{} \and
      \LdruleTXXIRl{} \and
      \LdruleTXXILl{} \and
      \LdruleTXXIRr{} \and
      \LdruleTXXILr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Typing Rules for the Typed Lambek Calculus: $\lambda\text{L}$}
  \label{fig:typed-L}
\end{figure}
\begin{figure}[h]
  \begin{mdframed}
    \begin{mathpar}
      %% \LdruleRXXAlpha{} \and
      \LdruleRXXBetal{} \and
      \LdruleRXXBetar{} \and
      \LdruleRXXBetaU{} \and
      \LdruleRXXBetaTOne{} \and
      \LdruleRXXBetaTTwo{} \and
      \LdruleRXXNatU{} \and
      \LdruleRXXNatT{} \and
      \LdruleRXXLetU{} \and
      %% \LdruleRXXLet{} \and
      %% \LdruleRXXTOne{} \and
      %% \LdruleRXXTTwo{} \and
      %% \LdruleRXXAlOne{} \and
      %% \LdruleRXXAlTwo{} \and
      %% \LdruleRXXArOne{} \and
      %% \LdruleRXXArTwo{} \and
      %% \LdruleRXXLl{} \and
      %% \LdruleRXXLr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for the Lambek Calculus: $\lambda\text{L}$}
  \label{fig:rewrite-L}
\end{figure}
\fi 


\textbf{Strong normalization.}  It is well known that intuitionistic
linear logic (ILL) is strongly normalizing, for example, see Bierman's
thesis \cite{Bierman:1994} or Benton's beautiful embedding of ILL into
system F \cite{Benton:1995c}.  

It is fairly straightforward to define
a reduction preserving embedding of $\lambda\text{L}$ 
%-- and of the other extension calculi  as well -- 
into ILL.  Intuitionistic
linear logic can be obtained from $\lambda\text{L}$ by replacing the
rules $\Ldrulename{T\_IRl}$, $\Ldrulename{T\_ILl}$,
$\Ldrulename{T\_IRr}$, and $\Ldrulename{T\_ILr}$ with the following
two rules:
\[
\begin{array}{cccccccc}
  \LdruleTXXIl{} & \quad \LdruleTXXIr{}
\end{array}
\]
In addition, contexts are considered multisets, and hence, exchange is
handled implicitly. Then we can reuse the idea of Benton's embeddings (defined in the appendix) to show type preservation and type reduction.

\iffalse
At this point we define the following embeddings.
\begin{definition}
  \label{def:lambda-L_to_ILL}
  We embed types and terms of $\lambda\text{L}$ into ILL as follows:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[I e]] & = & [[I]]\\
        & [[(A (x) B) e]] & = & [[A e (x) h(B e)]]\\
        & [[(A -> B) e]] & = & [[A e -o h(B e)]]\\
        & [[(A <- B) e]] & = & [[A e -o h(B e)]]\\                    
        \\
        \text{Terms:}\\
        & [[x e]] & = & [[x]]\\
        & [[unit e]] & = & [[unit]]\\
        & [[{t1 (x) t2} e]] & = & [[t1 e (x) h{t2 e}]]\\
        & [[{let t1 be p in t2} e]] & = & [[let t1 e be p in h{t2 e}]]\\
        & [[{\l x : A.t} e]] & = & [[\ x : A.h{t e}]]\\
        & [[{\r x : A.t} e]] & = & [[\ x : A.h{t e}]]\\
        & [[{appl t1 t2} e]] & = & [[h{t1 e} h{t2 e}]]\\
        & [[{appr t1 t2} e]] & = & [[h{t1 e} h{t2 e}]]\\
      \end{array}
    \end{math}
  \end{center}
  The previous embeddings can be extended to contexts in the
  straightforward way, and to sequents as follows:
  \[ [[(G |- t : A) e]] = [[G e |- t e : h(A e)]]\]
\end{definition}
\noindent
This embedding preserves typing and reduction.
\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding}
  If $[[G |- t : A]]$ in $\lambda\text{L}$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}
\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}
\fi 

%\noindent
The  two lemmas in the appendix  imply that $\lambda\text{L}$ is strongly
normalizing, because ILL is. (proof sketches in the appendix as well.)

\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

\iffalse
\begin{proof}
  Suppose $[[t]]$ is not strongly normalizing.  Then there exists at
  least one infinite descending chain starting with $[[t]]$ of the
  form $[[t]] \redto [[t']] \redto [[t'']] \redto
  \cdots$. Lemma~\ref{lemma:reduction_preserving_embedding} implies
  that there must also be an infinite descending chain of the form
  $[[t e]] \redto [[t' e]] \redto [[t'' e]] \redto \cdots$, but we
  know this is impossible, because ILL is strongly normalizing.
\end{proof}
\fi 

\textbf{Confluence.} The Church-Rosser property is well known to hold
for ILL modulo commuting conversions, for example, see Theorem~19 of
\cite{Bierman:1994} on page 96.  Since $\lambda\text{L}$ is
essentially a subsystem of ILL, it is straightforward, albeit
lengthly, to simply redefine Bierman's candidates 
%(Definitions~17, 19,20, and 21 of Section 5.1 of ibid.), 
and carry out a similar proof as Bierman's (Theorem~19 on page 96 of ibid.).  
%However, giving the details here would not be fruitful nor enlightening, and hence, we omit the proof.  Thus, we have the following:
\begin{theorem}[Confluence]
  \label{thm:confluence}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}

%%%%%%%%%%
% subsection the_typed_lambek_calculi_lambda-l (end)
Similarly we can prove strong normalization and confluence both for the Lambek calculus extended with the of-course modality and extended with the exchange modality. Details can be found in the appendix.
%%%%%%%%%%%%


\iffalse
\subsection{The Typed Lambek Calculus: $\lambda\text{L}_!$}
\label{subsec:the_typed_lambek_calculus:lambda-l!}
The calculus we introduce in this section is an extension of
$\lambda\text{L}$ with the of-course modality $[[!A]]$.  This
extension follows from ILL exactly.  The syntax of types and terms of
$\lambda\text{L}$ are extended as follows:
\[
\begin{array}{cllllll}
  \text{(types)}    & [[A]] & := & \cdots \mid [[! A]]\\
  \text{(terms)}    & [[t]] & := & \cdots \mid [[copy t' as t1 , t2 in t]] \mid [[discard t' in t]]
  \mid [[promote! t' for t'' in t]] \mid \\ & & & [[derelict! t]]\\
\end{array}
\]
The new type and terms are what one might expect, and are the
traditional syntax used for the of-course modality.  We add the
following typing rules to $\lambda\text{L}$:
\begin{mathpar}
      \LdruleTXXC{} \and
      \LdruleTXXW{} \and
      \LdruleTXXBr{} \and
      \LdruleTXXBl{} 
\end{mathpar}
\begin{figure}
  \small
  \begin{mdframed}
    \begin{mathpar}
      \LdruleRXXBetaDR{} \and
      \LdruleRXXBetaDI{} \and
      \LdruleRXXBetaC{} \and
      \LdruleRXXNatD{} \and
      \LdruleRXXNatC{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for The Typed Lambek Calculus: $\lambda\text{L}_!$}
  \label{fig:rewrite-LB}
\end{figure}
Finally, the reduction rules can be found in
Figure~\ref{fig:rewrite-LB}.  The equality used in the
$\Ldrulename{R\_BetaC}$ rule is definitional, meaning, that the rule
simply gives the terms on the right side of the equation the name on
the left side, and nothing more.  This makes the rule easier to read.

\textbf{Strong normalization.} Showing strong normalization for
$\lambda\text{L}_!$ easily follows by a straightforward extension of
the embedding we gave for $\lambda\text{L}$.
\begin{definition}
  \label{def:embed-lambda-L!-in-ILL}
  The following is an extension of the embedding of $\lambda\text{L}$
  into ILL resulting in an embedding of types and terms of
  $\lambda\text{L}_!$ into ILL:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[(! A) e]] & = & [[! h(A e)]]\\        
        \\
        \text{Terms:}\\
        & [[{copy t' as t1 , t2 in t} e]] & = & [[copy t' e as t1 e , t2 e in h{t e}]]\\
        & [[{discard t' in t} e]] & = & [[discard t' e in h{t e}]]\\
        & [[{promote! t' for t'' in t} e]] & = & [[promote! t' e for t'' e in h{t e}]]\\
        & [[{derelict! t} e]] & = & [[derelict! h{t e}]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}

\noindent
Just as before this embedding is type preserving and reduction preserving.
\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding_lambdaL!}
  If $[[G |- t : A]]$ in $\lambda\text{L}_!$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}

\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding_lambdaL!}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}_!$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}
\noindent
Finally, we can use the previous two results to conclude strong
normalization, because ILL is.
\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization_lambdaL!}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

\textbf{Confluence.} The Church-Rosser property also holds for
$\lambda\text{L}_!$, and can be shown by straightforwardly applying a
slightly modified version of Bierman's proof \cite{Bierman:1994} just
as we did for $\lambda\text{L}$.  Thus, we have the following:
\begin{theorem}[Confluence]
  \label{thm:confluence}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}
% subsection the_typed_lambek_calculus:lambda-l! (end)

\fi 
%%%%%%%%%%%%%%%%%
\iffalse
\subsection{The Typed Lambek Calculus: $\lambda\text{L}_\kappa$}
\label{subsec:the_typed_lambek_calculus:lambda-l-kappa}

The next calculus we introduce is also an extension of
$\lambda\text{L}$ with a modality that adds exchange to
$\lambda\text{L}_\kappa$ denoted $[[E A]]$.  It is perhaps the most
novel of the calculi we have introduced, but due to space restrictions is is also banished to the appendix. 

\iffalse
The syntax of types
and terms of $\lambda\text{L}$ are extended as follows:
\[
\begin{array}{cllllll}
  \text{(types)}    & [[A]] & := & \cdots \mid [[E A]]\\
  \text{(terms)}    & [[t]] & := & \cdots \mid [[lexchange t1,t2 with x,y in t3]] \mid [[rexchange t1,t2 with x,y in t3]] \mid 
  \\ & & & [[promoteE t' for t'' in t]] \mid [[derelictE t]]\\
\end{array}
\]
\fi 

The syntax for types has been extended to include the exchange
modality, and the syntax of terms follow suit.  The terms $[[lexchange
    t1,t2 with x,y in t3]]$ and $[[rexchange t1,t2 with x,y in t3]]$
are used to explicitly track uses of exchange throughout proofs.  

\iffalse
We add the following typing rules to $\lambda\text{L}$:
\begin{mathpar}
  \LdruleTXXEOne{} \and
  \LdruleTXXETwo{} \and
  \LdruleTXXEr{} \and
  \LdruleTXXEl{} 
\end{mathpar}

\begin{figure}[h]
  \small
  \begin{mdframed}
    \begin{mathpar}      
      \LdruleRXXBetaEDR{} \and
      \LdruleRXXNatEl{} \and
      \LdruleRXXNatEr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for The Typed Lambek Calculus: $\lambda\text{L}_\kappa$}
  \label{fig:rewrite-LE}
\end{figure}
\noindent
The reduction rules are in Figure~\ref{fig:rewrite-LE}, and are vary
similar to the rules from $\lambda\text{L}_!$.
\fi 

\textbf{Strong normalization.}  Similarly, we show that we can embed
$\lambda\text{L}_\kappa$ into ILL, but the embedding is a bit more
interesting.

\iffalse
\begin{definition}
  \label{def:embed-lambda-L!-in-ILL}
  The following is an extension of the embedding of $\lambda\text{L}$
  into ILL resulting in an embedding of types and terms of
  $\lambda\text{L}_\kappa$ into ILL:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[(E A) e]] & = & [[! h(A e)]]\\        
        \\
        \text{Terms:}\\
        & [[{lexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{rexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{promoteE t' for t'' in t} e]] & = & [[promote! t' e for t'' e in h{t e}]]\\
        & [[{derelictE t} e]] & = & [[derelict! h{t e}]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}
\fi 

The embedding  translates the exchange modality into the
of-course modality of ILL.  We do this so as to preserve the comonadic
structure of the exchange modality.  One might think that we could
simply translate the exchange modality to the identity, but as Benton
showed \cite{Benton:1995c}, this would result in an embedding that
does not preserve reductions.  Furthermore, the left and right
exchange terms are translated away completely, but this works because
ILL contains exchange in general, and hence, does not need to be
tracked explicitly.  It is now straightforward to prove the following the lemmas that lead to


\iffalse
\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding_lambdaLk}
  If $[[G |- t : A]]$ in $\lambda\text{L}_!$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}
\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding_lambdaLk}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}_!$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}
\noindent
Finally, we can use the previous two results to conclude strong
normalization, because ILL is.
\fi 

\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization_lambdaLk}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

%\textbf{Confluence.} The Church-Rosser property also holds for $\lambda\text{L}_\kappa$, and the proof is nearly identical to the proof that $\lambda\text{L}_!$ is confluent.  Thus, we have the following:


\begin{theorem}[Confluence]
  \label{thm:confluence-lambdaLk}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}
% subsection the_typed_lambek_calculus:lambda-l-kappa (end)
\fi 


%\subsection{The Typed Lambek Calculus: $\lambda\text{L}_{!\kappa}$}
\label{subsec:the_typed_lambek_calculus:lambda-l-!kappa}
If we combine all three of the previous typed Lambek calculi, then we
obtain the typed Lambek calculus $\lambda\text{L}_{!\kappa}$.  
%We do not explicitly define the syntax, typing rules, and reduction rules here, because we would be repeating what we have already defined in the previous sections.  
The main characteristics of this system are that it
provides the benefits of the non-symmetric adjoint structure of the Lambek calculus with the ability  of
having exchange, and the of-course modality, but both are carefully
tracked within the proofs.

Strong normalization for this calculus can be proved similarly to the
previous calculi by simply merging the embeddings together.  Thus,
both modalities of $\lambda\text{L}_{!\kappa}$ would merge into the
of-course modality of ILL.  The Church-Rosser property also holds for
$\lambda\text{L}_{!\kappa}$ by extending the proof of confluence for
ILL by Bierman \cite{Bierman:1994} just as we did for the other
systems.  Thus, we have the following results.

\begin{theorem}[Strong Normalization]
  \label{theorem:strong_normalization_lambdaL!k}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

\begin{theorem}[Confluence]
  \label{thm:confluence-lambdaL!k}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}
% subsection the_typed_lambek_calculus:lambda-l-!kappa (end)
% section type_theories (end)


\section{Conclusions}
We have recalled how to use biclosed posets and sets to construct dialectica-like models of the Lambek calculus. This construction is admittedly not the easiest one, reason why we use automated tools to verify our definitions, but it has one striking advantage. It shows how to introduce modalities to recover the expressive power of intuitionistic (and a posteriori classical) propositional logic to the system. We know of no other construction of models of Lambek calculus  that does  model  modalities, not using their syntactic properties. (The traditional view in algebraic semantics is to consider idempotent operators for modalities like !). The categorical semantics  here has been described before \cite{depaiva1991}, but the syntactic treatment of the lambda-calculi, in the style of \cite{benton1993} had not been done and there were doubts about its validity, given the results of Jay \cite{jay1991}. We are glad to put this is a firm footing, using another one of Benton's ideas: his embedding of intuitionistic linear logic into system F. Finally, we envisage more work, along the lines of algebraic proof theory, for modalities and non-symmetric type systems.

\bibliographystyle{plain}
\bibliography{references}

%%%%%%
%%%%%%%%%%%%

\appendix{\section*{Appendix: Type Theory for  Lambek Calculus}}

We first introduce the typing rules for the type theory associated to the pure Lambek calculus. This is sometimes called \textit{full Lambek calculus}, as it has tensor products and its unit.

\begin{figure}[h]
  \begin{mdframed}
    \begin{mathpar}
      \LdruleTXXvar{} \and
      \LdruleTXXUr{} \and
      \LdruleTXXcut{} \and
      \LdruleTXXUl{} \and
      \LdruleTXXTl{} \and
      \LdruleTXXTr{} \and
      \LdruleTXXIRl{} \and
      \LdruleTXXILl{} \and
      \LdruleTXXIRr{} \and
      \LdruleTXXILr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Typing Rules for the Typed Lambek Calculus: $\lambda\text{L}$}
  \label{fig:typed-L}
\end{figure}
\begin{figure}[h]
  \begin{mdframed}
    \begin{mathpar}
      %% \LdruleRXXAlpha{} \and
      \LdruleRXXBetal{} \and
      \LdruleRXXBetar{} \and
      \LdruleRXXBetaU{} \and
      \LdruleRXXBetaTOne{} \and
      \LdruleRXXBetaTTwo{} \and
      \LdruleRXXNatU{} \and
      \LdruleRXXNatT{} \and
      \LdruleRXXLetU{} \and
      %% \LdruleRXXLet{} \and
      %% \LdruleRXXTOne{} \and
      %% \LdruleRXXTTwo{} \and
      %% \LdruleRXXAlOne{} \and
      %% \LdruleRXXAlTwo{} \and
      %% \LdruleRXXArOne{} \and
      %% \LdruleRXXArTwo{} \and
      %% \LdruleRXXLl{} \and
      %% \LdruleRXXLr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for the Lambek Calculus: $\lambda\text{L}$}
  \label{fig:rewrite-L}
\end{figure}
%% \section{Term Annotated Cut Elimination Procedure for L}
%% \label{sec:cut_elimination_procedure_for_l}
%% \input{cut-elim-output}
%% % section cut_elimination_procedure_for_l (end)

We denote the reflexive and transitive closure of the $[[~>]]$ by
$[[~*>]]$.  We call a term with no $\beta$-redexes a normal form,
and we denote normal forms by $[[n]]$.  In the interest of space we
omit the congruence rules from the definition of the reduction
relation; we will do this for each calculi introduced throughout this
section.  The other typed calculi we introduce below will be
extensions of $\lambda\text{L}$, thus, we do not reintroduce these
rules each time for readability.

At this point we define the following embeddings.
\begin{definition}
  \label{def:lambda-L_to_ILL}
  We embed types and terms of $\lambda\text{L}$ into ILL as follows:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[I e]] & = & [[I]]\\
        & [[(A (x) B) e]] & = & [[A e (x) h(B e)]]\\
        & [[(A -> B) e]] & = & [[A e -o h(B e)]]\\
        & [[(A <- B) e]] & = & [[A e -o h(B e)]]\\                    
        \\
        \text{Terms:}\\
        & [[x e]] & = & [[x]]\\
        & [[unit e]] & = & [[unit]]\\
        & [[{t1 (x) t2} e]] & = & [[t1 e (x) h{t2 e}]]\\
        & [[{let t1 be p in t2} e]] & = & [[let t1 e be p in h{t2 e}]]\\
        & [[{\l x : A.t} e]] & = & [[\ x : A.h{t e}]]\\
        & [[{\r x : A.t} e]] & = & [[\ x : A.h{t e}]]\\
        & [[{appl t1 t2} e]] & = & [[h{t1 e} h{t2 e}]]\\
        & [[{appr t1 t2} e]] & = & [[h{t1 e} h{t2 e}]]\\
      \end{array}
    \end{math}
  \end{center}
  The previous embeddings can be extended to contexts in the
  straightforward way, and to sequents as follows:
  \[ [[(G |- t : A) e]] = [[G e |- t e : h(A e)]]\]
\end{definition}
\noindent
This embedding preserves typing and reduction.
\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding}
  If $[[G |- t : A]]$ in $\lambda\text{L}$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}
\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}


\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}


\begin{proof}
  Suppose $[[t]]$ is not strongly normalizing.  Then there exists at
  least one infinite descending chain starting with $[[t]]$ of the
  form $[[t]] \redto [[t']] \redto [[t'']] \redto
  \cdots$. Lemma~\ref{lemma:reduction_preserving_embedding} implies
  that there must also be an infinite descending chain of the form
  $[[t e]] \redto [[t' e]] \redto [[t'' e]] \redto \cdots$, but we
  know this is impossible, because ILL is strongly normalizing.
\end{proof}

\section{The Typed Lambek Calculus: $\lambda\text{L}_!$}
\label{subsec:the_typed_lambek_calculus:lambda-l!}
The calculus we introduce in this section is an extension of
$\lambda\text{L}$ with the of-course modality $[[!A]]$.  This
extension follows from ILL exactly.  The syntax of types and terms of
$\lambda\text{L}$ are extended as follows:
\[
\begin{array}{cllllll}
  \text{(types)}    & [[A]] & := & \cdots \mid [[! A]]\\
  \text{(terms)}    & [[t]] & := & \cdots \mid [[copy t' as t1 , t2 in t]] \mid [[discard t' in t]]
  \mid [[promote! t' for t'' in t]] \mid \\ & & & [[derelict! t]]\\
\end{array}
\]
The new type and terms are what one might expect, and are the
traditional syntax used for the of-course modality.  We add the
following typing rules to $\lambda\text{L}$:
\begin{mathpar}
      \LdruleTXXC{} \and
      \LdruleTXXW{} \and
      \LdruleTXXBr{} \and
      \LdruleTXXBl{} 
\end{mathpar}
\begin{figure}
  \small
  \begin{mdframed}
    \begin{mathpar}
      \LdruleRXXBetaDR{} \and
      \LdruleRXXBetaDI{} \and
      \LdruleRXXBetaC{} \and
      \LdruleRXXNatD{} \and
      \LdruleRXXNatC{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for The Typed Lambek Calculus: $\lambda\text{L}_!$}
  \label{fig:rewrite-LB}
\end{figure}
Finally, the reduction rules can be found in
Figure~\ref{fig:rewrite-LB}.  The equality used in the
$\Ldrulename{R\_BetaC}$ rule is definitional, meaning, that the rule
simply gives the terms on the right side of the equation the name on
the left side, and nothing more.  This makes the rule easier to read.

\textbf{Strong normalization.} Showing strong normalization for
$\lambda\text{L}_!$ easily follows by a straightforward extension of
the embedding we gave for $\lambda\text{L}$.
\begin{definition}
  \label{def:embed-lambda-L!-in-ILL}
  The following is an extension of the embedding of $\lambda\text{L}$
  into ILL resulting in an embedding of types and terms of
  $\lambda\text{L}_!$ into ILL:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[(! A) e]] & = & [[! h(A e)]]\\        
        \\
        \text{Terms:}\\
        & [[{copy t' as t1 , t2 in t} e]] & = & [[copy t' e as t1 e , t2 e in h{t e}]]\\
        & [[{discard t' in t} e]] & = & [[discard t' e in h{t e}]]\\
        & [[{promote! t' for t'' in t} e]] & = & [[promote! t' e for t'' e in h{t e}]]\\
        & [[{derelict! t} e]] & = & [[derelict! h{t e}]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}

\noindent
Just as before this embedding is type preserving and reduction preserving.
\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding_lambdaL!}
  If $[[G |- t : A]]$ in $\lambda\text{L}_!$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}

\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding_lambdaL!}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}_!$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}
\noindent
Finally, we can use the previous two results to conclude strong
normalization, because ILL is.
\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization_lambdaL!}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

\textbf{Confluence.} The Church-Rosser property also holds for
$\lambda\text{L}_!$, and can be shown by straightforwardly applying a
slightly modified version of Bierman's proof \cite{Bierman:1994} just
as we did for $\lambda\text{L}$.  Thus, we have the following:
\begin{theorem}[Confluence]
  \label{thm:confluence}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}
% subsection the_typed_lambek_calculus:lambda-l! (end)

The syntax of types
and terms of $\lambda\text{L}$ are extended as follows:
\[
\begin{array}{cllllll}
  \text{(types)}    & [[A]] & := & \cdots \mid [[E A]]\\
  \text{(terms)}    & [[t]] & := & \cdots \mid [[lexchange t1,t2 with x,y in t3]] \mid [[rexchange t1,t2 with x,y in t3]] \mid 
  \\ & & & [[promoteE t' for t'' in t]] \mid [[derelictE t]]\\
\end{array}
\]

We add the following typing rules to $\lambda\text{L}$:
\begin{mathpar}
  \LdruleTXXEOne{} \and
  \LdruleTXXETwo{} \and
  \LdruleTXXEr{} \and
  \LdruleTXXEl{} 
\end{mathpar}

\begin{figure}[h]
  \small
  \begin{mdframed}
    \begin{mathpar}      
      \LdruleRXXBetaEDR{} \and
      \LdruleRXXNatEl{} \and
      \LdruleRXXNatEr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for The Typed Lambek Calculus: $\lambda\text{L}_\kappa$}
  \label{fig:rewrite-LE}
\end{figure}
\noindent
The reduction rules are in Figure~\ref{fig:rewrite-LE}, and are vary
similar to the rules from $\lambda\text{L}_!$.

\begin{definition}
  \label{def:embed-lambda-L!-in-ILL}
  The following is an extension of the embedding of $\lambda\text{L}$
  into ILL resulting in an embedding of types and terms of
  $\lambda\text{L}_\kappa$ into ILL:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[(E A) e]] & = & [[! h(A e)]]\\        
        \\
        \text{Terms:}\\
        & [[{lexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{rexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{promoteE t' for t'' in t} e]] & = & [[promote! t' e for t'' e in h{t e}]]\\
        & [[{derelictE t} e]] & = & [[derelict! h{t e}]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}


\section{The Typed Lambek Calculus: $\lambda\text{L}_\kappa$}
\label{subsec:the_typed_lambek_calculus:lambda-l-kappa}

The next calculus we introduce is also an extension of
$\lambda\text{L}$ with a modality that adds exchange to
$\lambda\text{L}_\kappa$ denoted $[[E A]]$.  It is perhaps the most
novel of the calculi we have introduced, but due to space restrictions is is also banished to the appendix. 


The syntax of types
and terms of $\lambda\text{L}$ are extended as follows:
\[
\begin{array}{cllllll}
  \text{(types)}    & [[A]] & := & \cdots \mid [[E A]]\\
  \text{(terms)}    & [[t]] & := & \cdots \mid [[lexchange t1,t2 with x,y in t3]] \mid [[rexchange t1,t2 with x,y in t3]] \mid 
  \\ & & & [[promoteE t' for t'' in t]] \mid [[derelictE t]]\\
\end{array}
\]


The syntax for types has been extended to include the exchange
modality, and the syntax of terms follow suit.  The terms $[[lexchange
    t1,t2 with x,y in t3]]$ and $[[rexchange t1,t2 with x,y in t3]]$
are used to explicitly track uses of exchange throughout proofs.  


We add the following typing rules to $\lambda\text{L}$:
\begin{mathpar}
  \LdruleTXXEOne{} \and
  \LdruleTXXETwo{} \and
  \LdruleTXXEr{} \and
  \LdruleTXXEl{} 
\end{mathpar}

\begin{figure}[h]
  \small
  \begin{mdframed}
    \begin{mathpar}      
      \LdruleRXXBetaEDR{} \and
      \LdruleRXXNatEl{} \and
      \LdruleRXXNatEr{} 
    \end{mathpar}
  \end{mdframed}
  \caption{Rewriting Rules for The Typed Lambek Calculus: $\lambda\text{L}_\kappa$}
  \label{fig:rewrite-LE}
\end{figure}
\noindent
The reduction rules are in Figure~\ref{fig:rewrite-LE}, and are vary
similar to the rules from $\lambda\text{L}_!$.


\textbf{Strong normalization.}  Similarly, we show that we can embed
$\lambda\text{L}_\kappa$ into ILL, but the embedding is a bit more
interesting.


\begin{definition}
  \label{def:embed-lambda-L!-in-ILL}
  The following is an extension of the embedding of $\lambda\text{L}$
  into ILL resulting in an embedding of types and terms of
  $\lambda\text{L}_\kappa$ into ILL:
  \begin{center}
    \begin{math}
      \begin{array}{lrllllllllllllllllll}
        \text{Types:}\\
        & [[(E A) e]] & = & [[! h(A e)]]\\        
        \\
        \text{Terms:}\\
        & [[{lexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{rexchange t1 , t2 with x , y in t3} e]] & = & [[ [t2 e/x][t1 e/y]h{t3 e}]]\\
        & [[{promoteE t' for t'' in t} e]] & = & [[promote! t' e for t'' e in h{t e}]]\\
        & [[{derelictE t} e]] & = & [[derelict! h{t e}]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}


The embedding  translates the exchange modality into the
of-course modality of ILL.  We do this so as to preserve the comonadic
structure of the exchange modality.  One might think that we could
simply translate the exchange modality to the identity, but as Benton
showed \cite{Benton:1995c}, this would result in an embedding that
does not preserve reductions.  Furthermore, the left and right
exchange terms are translated away completely, but this works because
ILL contains exchange in general, and hence, does not need to be
tracked explicitly.  It is now straightforward to prove the following the lemmas that lead to



\begin{lemma}[Type Preserving Embedding]
  \label{lemma:type_preserving_embedding_lambdaLk}
  If $[[G |- t : A]]$ in $\lambda\text{L}_!$, then
  $[[G e |- t e : h(A e)]]$ in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  typing derivation.
\end{proof}
\begin{lemma}[Reduction Preserving Embedding]
  \label{lemma:reduction_preserving_embedding_lambdaLk}
  If $[[t1 ~> t2]]$ in $\lambda\text{L}_!$, then $[[t1 e ~> h{t2 e}]]$
  in ILL.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of the assumed
  reduction derivation.
\end{proof}
\noindent
Finally, we can use the previous two results to conclude strong
normalization, because ILL is.


\begin{theorem}[Strong Normalization]
  \label{corollary:strong_normalization_lambdaLk}
  If $[[G |- t : A]]$, then $[[t]]$ is strongly normalizing.
\end{theorem}

%\textbf{Confluence.} The Church-Rosser property also holds for $\lambda\text{L}_\kappa$, and the proof is nearly identical to the proof that $\lambda\text{L}_!$ is confluent.  Thus, we have the following:


\begin{theorem}[Confluence]
  \label{thm:confluence-lambdaLk}
  The reduction relation, $[[~>]]$, modulo the commuting conversions
  is confluent.
\end{theorem}
% subsection the_typed_lambek_calculus:lambda-l-kappa (end)



\end{document}

http://www.di.ens.fr/~zappa/readings/wmm10.pdf
Sewell, Peter, et al. "Ott: effective tool support for the working semanticist." ACM SIGPLAN Notices. Vol. 42. No. 9. ACM, 2007.
https://www.cs.kent.ac.uk/people/staff/sao/documents/icfp07.pdf


